{{left_sidebar_enabled,right_sidebar_enabled=False,False}}
{{extend 'layout.html'}}
{{from ndsfunctions import truncquest}}
<h1>My Ratings</h1>
{{=form}}

{{if quests:}}
<table id='TabAnswers' class='table issuetable2 table-bordered table-condensed'>
				<thead>
					<tr>
						<th width="5%">Level</th>
                        <th width="50%">Question</th>
                        <th width="8%">Status</th>
                        <th width="15%">My Answer</th>
                        <th width="16%">Correct Ans</th>
                        <th width="6%">Score</th>                     
                    </tr>
                </thead>
                    <tbody>
{{for i,row in enumerate(quests):}}
{{if i==items_per_page: break}}
{{rowans=0}}
<tr class={{if row.questionid.status == 'In Progress':}}"text-info"{{elif row.answer == row.questionid.correctans:}}"text-success"((rowans=1}}{{else:}}"text-warning"((rowans=2}}{{pass}}>
<th><a href="{{=URL('viewquest','index',args=[row.questionid.id])}}">{{=row.questionid.question_level}}</a></th>
<td>{{=truncquest(row.questionid.questiontext)}}</td>
<td>{{if row.status == 'In Progress':}}In Progress{{else:}}{{=row.questionid.status}} {{pass}}</td>
<td>{{=row.questionid.answers[row.answer]}}</td>
<td>{{if row.status == 'In Progress':}}-{{else:}}{{=row.questionid.correctanstext()}} {{pass}}</td>
<td>{{=row.score}}</td>
</tr>
{{pass}}
 </tbody>
</table>
                        
{{if page:}}
<INPUT TYPE=BUTTON class="btn btn-primary btn-sm" onClick="parent.location='{{=URL(args=[page-1,q,s])}}'" VALUE="Previous">
{{pass}}

{{if len(quests)>items_per_page:}}
<INPUT TYPE=BUTTON class="btn btn-primary btn-sm" onClick="parent.location='{{=URL(args=[page+1,q,s])}}'" VALUE="Next">
{{pass}}

{{else:}}
<p>No questions for selected filters.</p>
{{pass}}

<script>
{{include 'review/newindex.js'}}
</script>